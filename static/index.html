<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>USGS Quake API Lab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
    <script src="/app.js" defer></script>
  </head>
  <body>
    <div class="bg-grid"></div>
    <main class="dashboard">
      <header class="hero card">
        <div>
          <p class="tag">Localhost API Input / Output Playground</p>
          <h1>USGS Quake API Lab</h1>
          <p class="subtitle">直接输入参数 -> 调 API -> 看输出 JSON + 图形</p>
        </div>
        <button id="refreshBtn" class="btn">Send Request</button>
      </header>

      <section class="controls card">
        <div class="control-group"><label for="starttime">starttime</label><input id="starttime" type="date" /></div>
        <div class="control-group"><label for="endtime">endtime</label><input id="endtime" type="date" /></div>
        <div class="control-group"><label for="minmagnitude">minmagnitude</label><input id="minmagnitude" type="number" step="0.1" min="0" value="4" /></div>
        <div class="control-group"><label for="limit">limit</label><input id="limit" type="number" min="1" max="200" value="80" /></div>
        <div class="control-group"><label for="orderby">orderby</label><select id="orderby"><option value="time">time</option><option value="magnitude">magnitude</option></select></div>
      </section>

      <section class="card io-card">
        <h2>API Request URL</h2>
        <code id="requestUrl"></code>
      </section>

      <section class="kpi-grid">
        <article class="card kpi"><span>Total Events</span><strong id="kpiCount">--</strong></article>
        <article class="card kpi"><span>Max Magnitude</span><strong id="kpiMax">--</strong></article>
        <article class="card kpi"><span>Average Magnitude</span><strong id="kpiAvg">--</strong></article>
        <article class="card kpi"><span>Tsunami Flags</span><strong id="kpiTsunami">--</strong></article>
      </section>

      <section class="chart-grid">
        <article class="card chart-card"><h2>Magnitude Distribution</h2><canvas id="magChart"></canvas></article>
        <article class="card chart-card"><h2>Activity Timeline</h2><canvas id="timeChart"></canvas></article>
        <article class="card chart-card"><h2>API Raw JSON Output</h2><pre id="jsonOutput" class="json-output"></pre></article>
      </section>

      <section class="card table-card">
        <div class="table-head"><h2>Event Records</h2><p id="statusText">Ready</p></div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Time (UTC)</th><th>Magnitude</th><th>Place</th><th>Depth (km)</th><th>Tsunami</th></tr></thead>
            <tbody id="eventsTable"></tbody>
          </table>
        </div>
      </section>
    </main>
  </body>
</html>
